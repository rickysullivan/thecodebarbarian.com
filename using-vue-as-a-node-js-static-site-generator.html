<!DOCTYPE html><html><head><script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TE4SWRGR9E"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-TE4SWRGR9E');
</script><title>Using Vue as a Node.js Static Site Generator | www.thecodebarbarian.com</title><meta name="viewport" content="width=device-width, initial-scale=1"><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,600,700" rel="stylesheet" type="text/css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"><link href="/style/style.css" rel="stylesheet" type="text/css"><link href="/style/github.css" rel="stylesheet" type="text/css"><script href="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script><script href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script href="/javascript/sidebar.js" type="text/javascript"></script><meta property="og:title" content="Using Vue as a Node.js Static Site Generator"><meta property="og:url" content="http://www.thecodebarbarian.com/using-vue-as-a-node-js-static-site-generator"><meta property="og:image" content="/images/naples.jpg"><meta property="og:site_name" content="The Code Barbarian"><meta property="description" content="Here's how you can build a static site blog using vanilla Vue and Node.js."><meta name="twitter:image" content="/images/naples.jpg"></head><body><div class="navbar social-links hidden-sm hidden-xs"><div class="container"><ul class="nav navbar-nav navbar-right"><li><a href="http://www.twitter.com/code_barbarian">twitter</a></li><li><a href="http://www.github.com/vkarpov15">github</a></li><li><a href="http://thecodebarbarian.com/feed.xml">rss</a></li><li><a href="/recommendations">recommendations</a></li></ul></div></div><div class="navbar" id="nav"><div class="container"><div class="navbar-header"><a class="navbar-brand big-brand" href="http://thecodebarbarian.com"><img class="logo" src="/images/Barbarian_Head.png"><span class="site-name">The Code Barbarian</span></a></div><div class="navbar-right collapse navbar-collapse" id="home-nav-mobile"><ul class="nav navbar-nav"><li><a href="/tag/mongodb.html">MongoDB</a></li><li><a href="/tag/nodejs.html">NodeJS</a></li><li><a href="/tag/asyncawait.html">Async/Await</a></li><li><a href="/tag/vue.html">Vue</a></li><li class="hidden-md hidden-lg"><a href="#">@code_barbarian</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Github</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Facebook</a></li></ul></div></div></div><div class="container-fluid"><div class="col-lg-3 col-lg-offset-9 right-bar" id="desktop-right-bar"><div class="right-bar-content-slider pull-right"><div class="row recent-posts right-bar-group"><div class="col-lg-12 articles"><p class="right-bar-label">Most Popular Articles</p><ul class="list-unstyled"><li class="right-bar-li"><a href="/common-async-await-design-patterns-in-node.js.html">Common Async/Await Design Patterns in Node.js</a></li><li class="right-bar-li"><a href="/unhandled-promise-rejections-in-node.js.html">Unhandled Promise Rejections in Node.js</a></li><li class="right-bar-li"><a href="/using-async-await-with-mocha-express-and-mongoose">Using Async/Await with Mocha, Express, and Mongoose</a></li><li class="right-bar-li"><a href="/write-your-own-node-js-promise-library-from-scratch.html">Write Your Own Node.js Promise Library from Scratch</a></li><li class="right-bar-li"><a href="/80-20-guide-to-express-error-handling">The 80/20 Guide to Express Error Handling</a></li></ul></div></div><div class="row recent-posts right-bar-group"><div class="col-lg-12 books"><p class="right-bar-label">Ebooks<div><a href="http://asyncawait.net/?utm_source=thecodebarbarian&amp;utm_campaign=sidebar"><img src="/images/verticalbanner.png"></a></div><div><a href="http://es2015generators.com"><img src="https://i.imgur.com/xvGNKlr.png"><p><i>The 80/20 Guide to ES2015 Generators</i></p></a></div></p></div></div></div></div></div><div class="container-fluid hidden-sm hidden-md hidden-lg" id="mobile-sharing-options"><div class="row"><div class="col-lg-12"><style>#home-nav-mobile {
  float: left !important;
  margin-left: 215px !important;
}
</style><div class="post-sharing-options"><div class="row"><div class="col-xs-3 twitter-share sharing-option"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter"></i></a></div><div class="col-xs-3 facebook-share sharing-option"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook"></i></a></div><div class="col-xs-3 google-share sharing-option"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus"></i></a></div><div class="col-xs-3 comment sharing-option"><a class="social" href="#disqus_thread"><i class="fa fa-comment"></i></a></div></div></div></div></div></div><div class="post-sharing-options hidden-xs pull-left" id="desktop-sharing-options"><ul class="list-unstyled"><li class="twitter-share"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter sharing-option"></i></a></li><li class="facebook-share"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook sharing-option"></i></a></li><li class="google-share"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus sharing-option"></i></a></li></ul></div><div class="container"><div class="col-lg-9 post-text"><div class="row"><div class="title-byline-container"><h1 class="post-title">Using Vue as a Node.js Static Site Generator</h1><div class="credits"><span class="byline">by Valeri Karpov</span><span class="byhandle"><a href="http://www.twitter.com/code_barbarian">@code_barbarian</a></span><span class="bydate">November 10, 2020</span></div></div></div><script type="text/javascript" src="/js/native.js"></script><div><script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>

<div class="native-banner"></div>
</div><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYI5K3Y&placement=thecodebarbariancom" id="_carbonads_js"></script><div class="post-body-text-container"><p>It&#39;s been nearly 6 years since <a href="/2015/02/06/static_site_generators">my last post about static site generators</a>, and
I still don&#39;t understand why there&#39;s a whole host of them. In my experience, static site generators like Hugo solve a
trivial problem badly, and leave you to clean up the mess. Thankfully, the Node.js ecosystem makes building a blog
as a static site easy: just choose your HTML templating language, pull in <a href="https://www.npmjs.com/package/marked">marked</a>
to convert your blog posts from markdown to HTML, write a <code>for</code> loop to loop over all your posts, and you&#39;re done.</p>
<p>Picking a templating language for building your layout comes with a lot of tradeoffs, and I&#39;ve used many different
ones. <a href="https://github.com/vkarpov15/thecodebarbarian.com/blob/ecea0e6da455d9244560bdb1d219f657151d6da2/index.js#L65-L78">This blog&#39;s layout is written in pug</a>. <a href="https://github.com/vkarpov15/masteringjs.io/blob/d572347046846b02f0a404216b7fb1150be0e058/components/layout.js">Mastering JS&#39; layout is written using ES6 template strings</a>. Both Pug and template literals
have their advantages, but they share one key disadvantage: the layout itself isn&#39;t plain HTML, which means you need tooling
to get a preview of what your layout looks like. On the other hand, <a href="https://www.getrevue.co/profile/masteringjs/issues/building-and-testing-email-templating-using-vue-257729">Vue supports plain HTML templates</a>, which is why I&#39;m building future blogs on Vue, and likely switching my existing blogs to Vue as well.</p>
<h2 id="setup">Setup</h2>
<p>The general idea of compiling a blog is taking an array of blog posts, compiling the corresponding markdown into HTML,
plugging it into an HTML layout, and creating a list view of the compiled blog posts. For example, say you have a
<code>my-first-blog-post.md</code> file:</p>
<pre><code>This is my **first** blog post!</code></pre><p>Here&#39;s an <code>index.js</code> file that you may use to compile this Markdown file into an <code>index.html</code> that lists blog posts
and a <code>my-first-blog-post.html</code> file that contains the body of the blog post.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> marked = <span class="hljs-built_in">require</span>(<span class="hljs-string">'marked'</span>);

<span class="hljs-keyword">const</span> posts = [
  {
    title: <span class="hljs-string">'My First Blog Post'</span>,
    source: <span class="hljs-string">'./my-first-blog-post.md'</span>,
    dest: <span class="hljs-string">'./my-first-blog-post.html'</span>
  }
];

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> post <span class="hljs-keyword">of</span> posts) {
  <span class="hljs-keyword">let</span> content = fs.readFileSync(post.source, <span class="hljs-string">'utf8'</span>);
  content = marked(content);
  fs.writeFileSync(post.dest, content);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Wrote'</span>, post.dest);
}

fs.writeFileSync(<span class="hljs-string">'./index.html'</span>, <span class="hljs-string">`
  &lt;h1&gt;Blog Posts&lt;/h1&gt;
  <span class="hljs-subst">${posts.map(blogPostLink).join('\n')}</span>
`</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blogPostLink</span>(<span class="hljs-params">post</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;div&gt;&lt;a href="<span class="hljs-subst">${post.dest}</span>"&gt;<span class="hljs-subst">${post.title}</span>&lt;/a&gt;&lt;/div&gt;`</span>;
}</code></pre>
<p>Yes, I&#39;m not using <a href="https://jekyllrb.com/docs/front-matter/">front matter</a>. Front matter is neat, especially if you
have non-technical people contributing content, but I don&#39;t, so front matter isn&#39;t useful in this case.</p>
<p>Running the above script produces the below <code>my-first-blog-post.html</code> file:</p>
<pre><code class="language-html">&lt;p&gt;This is my &lt;strong&gt;first&lt;/strong&gt; blog post!&lt;/p&gt;</code></pre>
<p>And the below <code>index.html</code> file:</p>
<pre><code class="language-html">  &lt;h1&gt;Blog Posts&lt;/h1&gt;
  &lt;div&gt;&lt;a href=&quot;./my-first-blog-post.html&quot;&gt;My First Blog Post&lt;/a&gt;&lt;/div&gt;</code></pre>
<p>Commit this code to GitHub, hook up <a href="https://www.netlify.com/">Netlify</a>, and you get a functioning proof of concept
for a blog.</p>
<h2 id="introducing-vue-server-renderer">Introducing vue-server-renderer</h2>
<p>The above script works for creating a very simple blog with zero styling or layout. But the rough patches of working
with vanilla ES6 template literals are starting to show. For example, nesting template literals gets messy, which
is why there&#39;s a separate function for every blog post in <code>index.html</code>:</p>
<pre><code class="language-javascript">fs.writeFileSync(<span class="hljs-string">'./index.html'</span>, <span class="hljs-string">`
  &lt;h1&gt;Blog Posts&lt;/h1&gt;
  <span class="hljs-subst">${posts.map(blogPostLink).join('\n')}</span>
`</span>);

<span class="hljs-comment">// Would be nice if we didn't have to have this function:</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blogPostLink</span>(<span class="hljs-params">post</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;div&gt;&lt;a href="<span class="hljs-subst">${post.dest}</span>"&gt;<span class="hljs-subst">${post.title}</span>&lt;/a&gt;&lt;/div&gt;`</span>;
}</code></pre>
<p>Plus, template strings mean you lose out on HTML syntax highlighting and the ability to preview your layout without
needing a compile step. Enter <a href="http://npmjs.com/package/vue-server-renderer">vue-server-renderer</a>, the most basic
way to handle <a href="https://masteringjs.io/tutorials/vue/ssr">server side rendering with Vue</a>. Let&#39;s <code>npm install</code>
the necessary packages:</p>
<pre><code>npm install vue vue-server-renderer pretty</code></pre><p>Next, let&#39;s write <code>list-template.html</code> and <code>post-template.html</code>. Our script will compile the <code>list-template.html</code> file
along with the list of blog posts into <code>index.html</code>, and <code>post-template.html</code> into each individual blog post. Below
is <code>list-template.html</code>:</p>
<pre><code class="language-html">&lt;div&gt;
  &lt;h1&gt;My Blog&lt;/h1&gt;
  &lt;div v-for=&quot;post in posts&quot;&gt;
    &lt;a v-bind:href=&quot;post.dest&quot; v-text=&quot;post.title&quot;&gt;Sample Title&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>Note that, while there are some Vue-specific attributes, this HTML file renders normally in the browser. The only issue
is that the <code>a</code> tag doesn&#39;t have a <code>href</code>. Below is <code>post-template.html</code>:</p>
<pre><code class="language-html">&lt;div&gt;
  &lt;h1 v-text=&quot;title&quot;&gt;Sample Title&lt;/h1&gt;
  &lt;div v-html=&quot;content&quot;&gt;
    Sample Content
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>Now, here&#39;s the modified <code>index.js</code>. The key difference is that, instead of using template literals to create HTML,
the below script uses vue-server-renderer&#39;s <code>renderToString()</code> function to compile a Vue app into HTML. Given an HTML
template and some data you want to use in the template, rendering the HTML is a 4-liner:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> Vue = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vue'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> marked = <span class="hljs-built_in">require</span>(<span class="hljs-string">'marked'</span>);
<span class="hljs-keyword">const</span> pretty = <span class="hljs-built_in">require</span>(<span class="hljs-string">'pretty'</span>);
<span class="hljs-keyword">const</span> { renderToString } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vue-server-renderer'</span>).createRenderer();

<span class="hljs-keyword">void</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> posts = [
    {
      title: <span class="hljs-string">'My First Blog Post'</span>,
      source: <span class="hljs-string">'./my-first-blog-post.md'</span>,
      dest: <span class="hljs-string">'./my-first-blog-post.html'</span>
    }
  ];

  <span class="hljs-keyword">const</span> postTemplate = fs.readFileSync(<span class="hljs-string">'./post-template.html'</span>, <span class="hljs-string">'utf8'</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> post <span class="hljs-keyword">of</span> posts) {
    <span class="hljs-keyword">let</span> content = fs.readFileSync(post.source, <span class="hljs-string">'utf8'</span>);
    content = marked(content);
    <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> Vue({
      template: postTemplate,
      data: () =&gt; ({ ...post, content })
    });
    <span class="hljs-comment">// Write prettified HTML</span>
    fs.writeFileSync(post.dest, pretty(<span class="hljs-keyword">await</span> renderToString(app)));
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Wrote'</span>, post.dest);
  }

  <span class="hljs-keyword">const</span> listTemplate = fs.readFileSync(<span class="hljs-string">'./list-template.html'</span>, <span class="hljs-string">'utf8'</span>);

  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> Vue({
    template: listTemplate,
    data: () =&gt; ({ posts })
  });

  <span class="hljs-comment">// Write prettified HTML</span>
  fs.writeFileSync(<span class="hljs-string">'./index.html'</span>, pretty(<span class="hljs-keyword">await</span> renderToString(app)));
}();</code></pre>
<p>So for each page, this script creates a new Vue instance, passes in the correct template and data, and uses the
asynchronous <code>renderToString()</code> function to get HTML. This script then passes the output through <code>pretty()</code>, because
<code>renderToString()</code> always outputs minified HTML.</p>
<p>Below is the compiled <code>my-first-blog-post.html</code> file:</p>
<pre><code class="language-html">&lt;div data-server-rendered=&quot;true&quot;&gt;
  &lt;h1&gt;My First Blog Post&lt;/h1&gt;
  &lt;div&gt;
    &lt;p&gt;This is my &lt;strong&gt;first&lt;/strong&gt; blog post!&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>And the compiled <code>index.html</code> file:</p>
<pre><code class="language-html">&lt;div data-server-rendered=&quot;true&quot;&gt;
  &lt;h1&gt;My Blog&lt;/h1&gt;
  &lt;div&gt;&lt;a href=&quot;./my-first-blog-post.html&quot;&gt;My First Blog Post&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>This new blog isn&#39;t much prettier, but it at least contains the basic framework for growing a more sophisticated
layout using Vue. Since layouts are plain HTML, you can easily pull in a layout that a professional designer put together,
or build one yourself. Plus, with Vue, you can use custom components, <a href="https://masteringjs.io/tutorials/vue/v-if"><code>v-if</code></a>,
and other neat tools for organizing your templates.</p>
<h2 id="moving-on">Moving On</h2>
<p>Streamlining your blog&#39;s build process is key for both developer sanity and stability. One of the biggest benefits of
using a <code>for</code> loop instead of an established static site generator is that I haven&#39;t had to worry too much about my
build system. I&#39;ve spent maybe 2 hours over the last 5 years working on the logic that compiles this blog from markdown
and pug, and that was just refactoring and upgrading Pug.</p>
<p>And, while I like using ES6 template literals because you
never need to update any dependencies, the benefits of writing layouts in plain <code>.html</code> files are just too good to
ignore. Plus Vue is exceptionally portable: use the same skills for building complex web apps and static sites, without
the heavy tooling requirements of tools like React. I&#39;ll be using Vue for blogs and static sites going forward.</p>
</div><div style="color: #666666; border-top: 1px dashed #666666; margin: 25px; text-align: center; padding-top: 10px"><em>Found a typo or error? Open up a pull request! This post is
available as markdown on&nbsp;<a href="https://github.com/vkarpov15/thecodebarbarian.com/blob/master/lib/posts/#{post.src.substr('./lib/posts/'.length)}">Github</a></em></div><div id="disqus_thread"></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'codebarbarian'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></div></div><div style="padding-bottom: 100px">&nbsp;</div><script type="text/javascript">var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://g0a3nbw0xa.execute-api.us-east-1.amazonaws.com/prod/track', true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onreadystatechange = function() {};
xhr.send(JSON.stringify({
  path: window.location.pathname,
  hostname: window.location.hostname
}));</script><link rel="stylesheet" href="/style/inlinecpc.css"></body></html>