<!DOCTYPE html><html><head><script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TE4SWRGR9E"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-TE4SWRGR9E');
</script><title>A Practical Guide to moment-timezone | www.thecodebarbarian.com</title><meta name="viewport" content="width=device-width, initial-scale=1"><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,600,700" rel="stylesheet" type="text/css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"><link href="/style/style.css" rel="stylesheet" type="text/css"><link href="/style/github.css" rel="stylesheet" type="text/css"><script href="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script><script href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script href="/javascript/sidebar.js" type="text/javascript"></script><meta property="og:title" content="A Practical Guide to moment-timezone"><meta property="og:url" content="http://www.thecodebarbarian.com/a-practical-guide-to-moment-timezone"><meta property="og:image" content="/images/jc.jpg"><meta property="og:site_name" content="The Code Barbarian"><meta property="description" content="An introduction to moment-timezone, the library for formatting dates in any timezone in Node.js."><meta name="twitter:image" content="/images/jc.jpg"></head><body><div class="navbar social-links hidden-sm hidden-xs"><div class="container"><ul class="nav navbar-nav navbar-right"><li><a href="http://www.twitter.com/code_barbarian">twitter</a></li><li><a href="http://www.github.com/vkarpov15">github</a></li><li><a href="http://thecodebarbarian.com/feed.xml">rss</a></li><li><a href="/recommendations">recommendations</a></li></ul></div></div><div class="navbar" id="nav"><div class="container"><div class="navbar-header"><a class="navbar-brand big-brand" href="http://thecodebarbarian.com"><img class="logo" src="/images/Barbarian_Head.png"><span class="site-name">The Code Barbarian</span></a></div><div class="navbar-right collapse navbar-collapse" id="home-nav-mobile"><ul class="nav navbar-nav"><li><a href="/tag/mongodb.html">MongoDB</a></li><li><a href="/tag/nodejs.html">NodeJS</a></li><li><a href="/tag/asyncawait.html">Async/Await</a></li><li><a href="/tag/vue.html">Vue</a></li><li class="hidden-md hidden-lg"><a href="#">@code_barbarian</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Github</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Facebook</a></li></ul></div></div></div><div class="container-fluid"><div class="col-lg-3 col-lg-offset-9 right-bar" id="desktop-right-bar"><div class="right-bar-content-slider pull-right"><div class="row recent-posts right-bar-group"><div class="col-lg-12 articles"><p class="right-bar-label">Most Popular Articles</p><ul class="list-unstyled"><li class="right-bar-li"><a href="/common-async-await-design-patterns-in-node.js.html">Common Async/Await Design Patterns in Node.js</a></li><li class="right-bar-li"><a href="/unhandled-promise-rejections-in-node.js.html">Unhandled Promise Rejections in Node.js</a></li><li class="right-bar-li"><a href="/using-async-await-with-mocha-express-and-mongoose">Using Async/Await with Mocha, Express, and Mongoose</a></li><li class="right-bar-li"><a href="/write-your-own-node-js-promise-library-from-scratch.html">Write Your Own Node.js Promise Library from Scratch</a></li><li class="right-bar-li"><a href="/80-20-guide-to-express-error-handling">The 80/20 Guide to Express Error Handling</a></li></ul></div></div><div class="row recent-posts right-bar-group"><div class="col-lg-12 books"><p class="right-bar-label">Ebooks<div><a href="http://asyncawait.net/?utm_source=thecodebarbarian&amp;utm_campaign=sidebar"><img src="/images/verticalbanner.png"></a></div><div><a href="http://es2015generators.com"><img src="https://i.imgur.com/xvGNKlr.png"><p><i>The 80/20 Guide to ES2015 Generators</i></p></a></div></p></div></div></div></div></div><div class="container-fluid hidden-sm hidden-md hidden-lg" id="mobile-sharing-options"><div class="row"><div class="col-lg-12"><style>#home-nav-mobile {
  float: left !important;
  margin-left: 215px !important;
}
</style><div class="post-sharing-options"><div class="row"><div class="col-xs-3 twitter-share sharing-option"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter"></i></a></div><div class="col-xs-3 facebook-share sharing-option"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook"></i></a></div><div class="col-xs-3 google-share sharing-option"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus"></i></a></div><div class="col-xs-3 comment sharing-option"><a class="social" href="#disqus_thread"><i class="fa fa-comment"></i></a></div></div></div></div></div></div><div class="post-sharing-options hidden-xs pull-left" id="desktop-sharing-options"><ul class="list-unstyled"><li class="twitter-share"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter sharing-option"></i></a></li><li class="facebook-share"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook sharing-option"></i></a></li><li class="google-share"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus sharing-option"></i></a></li></ul></div><div class="container"><div class="col-lg-9 post-text"><div class="row"><div class="title-byline-container"><h1 class="post-title">A Practical Guide to moment-timezone</h1><div class="credits"><span class="byline">by Valeri Karpov</span><span class="byhandle"><a href="http://www.twitter.com/code_barbarian">@code_barbarian</a></span><span class="bydate">June 09, 2020</span></div></div></div><script type="text/javascript" src="/js/native.js"></script><div><script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>

<div class="native-banner"></div>
</div><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYI5K3Y&placement=thecodebarbariancom" id="_carbonads_js"></script><div class="post-body-text-container"><p><a href="/formatting-javascript-dates-with-moment-js.html">Moment</a> is a popular JavaScript library for working with dates. Moment makes it easy to add, subtract, and format dates, but, by itself, Moment is limited to working with two timezones: UTC and whatever the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset">JavaScript runtime locale&#39;s timezone is</a>. The <a href="https://momentjs.com/timezone/">moment-timezone library</a> provides the core Moment API, plus support for <a href="https://www.iana.org/time-zones">IANA timezones</a>.</p>
<p>Note that you can theoretically <a href="https://masteringjs.io/tutorials/fundamentals/date_format#timezones">format dates in arbitrary timezones with vanilla JavaScript</a>, but the built-in <code>toLocaleString()</code> function&#39;s supported timezones are implementation-specific. Which means that you&#39;re better off not relying on <code>toLocaleString()</code> supporting timezones in the browser.</p>
<h2 id="getting-started-with-moment-timezone">Getting Started With moment-timezone</h2>
<p>Moment-timezone is a <a href="https://www.npmjs.com/package/moment-timezone">separate npm module</a> from <a href="https://www.npmjs.com/package/moment">moment</a>, but <a href="https://github.com/moment/moment-timezone/blob/063a95053afdfca0cbe8fb035271205d5f0ac417/package.json#L31">moment-timezone depends on moment under the hood</a>. So you can install moment-timezone by itself, or both moment and moment-timezone.</p>
<p>Once you install moment-timezone, you can <code>require()</code> it in and use it like you would use moment.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> moment = <span class="hljs-built_in">require</span>(<span class="hljs-string">'moment-timezone'</span>);

<span class="hljs-comment">// 'Mon Jun 08 2020 17:07:46 GMT-0400'</span>
moment().toString();</code></pre>
<p>The moment-timezone API is, for practical purposes, a superset of the <a href="/formatting-javascript-dates-with-moment-js.html">moment API</a>. Virtually anything you can do with moment,
you can also do with moment-timezone. For example, date formatting:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> moment = <span class="hljs-built_in">require</span>(<span class="hljs-string">'moment-timezone'</span>);

moment().format(<span class="hljs-string">'YYYYMMDD HH:mm'</span>); <span class="hljs-comment">// '20200608 17:10'</span></code></pre>
<p>However, moment-timezone adds a <code>moment.tz()</code> that you can use to create a
new moment object with a custom timezone. For example, here&#39;s how you can
create a moment object representing the current time in <a href="https://en.wikipedia.org/wiki/Longyearbyen">Longyearbyen, Norway</a>.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// 'Tue Jun 08 2020 23:13:16 GMT+0200'</span>
moment.tz(<span class="hljs-string">'Arctic/Longyearbyen'</span>).toString();</code></pre>
<p>The string <code>&#39;Arctic/Longyearbyen&#39;</code> is an <a href="https://en.wikipedia.org/wiki/Tz_database">IANA timezone name</a>.
<a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">Wikipedia has a full list of IANA timezones</a>.
For example, below are 3 more common IANA timezone names:</p>
<ul>
<li>&#39;America/New_York&#39;: US Eastern time</li>
<li>&#39;America/Los_Angeles&#39;: US Pacific time</li>
<li>&#39;Europe/London&#39;: UK time</li>
</ul>
<h2 id="formatting-and-loading-dates-using-momenttz">Formatting and Loading Dates Using <code>moment.tz()</code></h2>
<p>One of the main reasons to use moment-timezone is to convert existing dates
from a standardized format to a certain timezone. For example, given a
<a href="https://www.unixtimestamp.com/index.php">Unix timestamp</a>, you can convert
that timestamp to its corresponding time in London, regardless of your
machine&#39;s local time.</p>
<p>You can convert a Unix timestamp to a nicely formatted string in a given
timezone by passing 2 parameters to <code>moment.tz()</code>:</p>
<pre><code class="language-javascript"><span class="hljs-comment">// Multiply by 1000, because Unix timestamps are in seconds and</span>
<span class="hljs-comment">// JavaScript dates expect milliseconds.</span>
moment.tz(<span class="hljs-number">1591716176</span> * <span class="hljs-number">1000</span>, <span class="hljs-string">'Europe/London'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm'</span>); <span class="hljs-comment">// '20200609 16:22'</span></code></pre>
<p>Similarly, you can convert a vanilla JavaScript date into a formatted
string with a given timezone. For example, the below code outputs a
date formatted for London time, even though my machine is on New York time.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// '20200609 16:26'</span>
moment.tz(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(), <span class="hljs-string">'Europe/London'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm'</span>);</code></pre>
<p>Moment-timezone also <a href="https://momentjs.com/timezone/docs/#/using-timezones/formatting/">adds a &#39;z&#39; option to <code>format()</code></a> which lets you add the abbreviated timezone name. The below code
outputs the current timezone as &#39;BST&#39;, short for <a href="https://en.wikipedia.org/wiki/British_Summer_Time">British Summer Time</a>.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// '20200609 16:29 BST'</span>
moment.tz(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(), <span class="hljs-string">'Europe/London'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm z'</span>);</code></pre>
<p>Note that &#39;z&#39; outputs BST, <strong>not</strong> Europe/London. The IANA timezone Europe/London
encodes daylight savings time rules. That means, if you pass Europe/London to moment-timezone, the
&#39;z&#39; option can output &#39;GMT&#39; or &#39;BST&#39; depending on daylight savings.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// '20200102 00:00 GMT'</span>
moment.tz(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2020-01-02'</span>), <span class="hljs-string">'Europe/London'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm z'</span>);</code></pre>
<p>In general, <code>moment.tz()</code> supports the same parameters as <code>moment()</code>,
plus the addition of a timezone parameter. For example, the below code
parses the date string &#39;2020/01/02&#39; with the given format and timezone,
giving you a moment object representing midnight on January 2, 2020
in London.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// '20200102 00:00 GMT'</span>
moment.tz(<span class="hljs-string">'2020/01/02'</span>, <span class="hljs-string">'YYYY/MM/DD'</span>, <span class="hljs-string">'Europe/London'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm z'</span>);

<span class="hljs-comment">// Because of how JavaScript date parsing works, `new Date('2020/01/02')`</span>
<span class="hljs-comment">// gives you January 2, 2020 in the server's local time, so the below</span>
<span class="hljs-comment">// will give you:</span>
<span class="hljs-comment">// '20200102 05:00 GMT'</span>
moment.tz(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2020/01/02'</span>), <span class="hljs-string">'Europe/London'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm z'</span>);</code></pre>
<h2 id="static-tz-vs-method-tz">Static <code>tz()</code> vs Method <code>tz()</code></h2>
<p>A common cause of confusion is that, in addition to the static <code>moment.tz()</code>
function, moment-timezone also adds a <code>tz()</code> method to moment instances.
This lets you change the timezone of a moment instance.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// '20200101 16:00 PST'</span>
moment(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2020-01-02'</span>)).tz(<span class="hljs-string">'America/Los_Angeles'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm z'</span>);</code></pre>
<p>In many cases, using the static function <code>moment.tz()</code> and the <code>moment#tz()</code> method
gives you the same result. However, they can give different results when parsing
date strings.</p>
<p>For example, if you parse the string &#39;2020/01/02&#39; and then call the <code>moment#tz()</code>
method, you&#39;re telling moment to parse the string in the locale time, and
then convert the date to a given IANA timezone.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// '20200101 21:00 PST'</span>
moment(<span class="hljs-string">'2020/01/02'</span>, <span class="hljs-string">'YYYY/MM/DD'</span>).tz(<span class="hljs-string">'America/Los_Angeles'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm z'</span>);</code></pre>
<p>However, if you call <code>moment.tz()</code> with a given IANA timezone, you&#39;re telling
moment to parse the string <em>in the given IANA timezone</em>, rather than in the
locale time. Notice that the below code shows the current time as exactly
midnight, rather than 21:00 (&#39;America/Los_Angeles&#39; is 3 hours behind New York time).</p>
<pre><code class="language-javascript"><span class="hljs-comment">// '20200102 00:00 PST'</span>
moment.tz(<span class="hljs-string">'2020/01/02'</span>, <span class="hljs-string">'YYYY/MM/DD'</span>, <span class="hljs-string">'America/Los_Angeles'</span>).format(<span class="hljs-string">'YYYYMMDD HH:mm z'</span>);</code></pre>
<p>Because of this difference, you should prefer to use <code>moment.tz()</code> when creating
new moment-timezone objects, rather than changing the timezone after creation
using the <code>moment#tz()</code> method.</p>
<h2 id="when-timezones-matter">When Timezones Matter</h2>
<p>Timezones often pop up when building apps where you have objects with an
implicit location. For example, if you&#39;re building a blog, and a user posts
a comment at 5pm in London, it is arguably correct to show a user looking
at the comment in New York that the comment was posted at 12pm.</p>
<p>But suppose you&#39;re building an events platform. If an event is happening
at 5pm in London and that event isn&#39;t being streamed online, a user in
New York should still see 5pm. If the expectation is that, if you are
participating in the event, you will be in London, then showing London
time regardless of the user&#39;s current location is the correct behavior.</p>
<h2 id="moving-on">Moving On</h2>
<p><a href="https://www.npmjs.com/package/moment-timezone">Moment-timezone</a> is a great library for handling times in different timezones. Given a Unix timestamp or a date string, you can convert it to a
fully fledged moment object in any IANA timezone. No need to worry about daylight savings time.</p>
</div><div style="color: #666666; border-top: 1px dashed #666666; margin: 25px; text-align: center; padding-top: 10px"><em>Found a typo or error? Open up a pull request! This post is
available as markdown on&nbsp;<a href="https://github.com/vkarpov15/thecodebarbarian.com/blob/master/lib/posts/#{post.src.substr('./lib/posts/'.length)}">Github</a></em></div><div id="disqus_thread"></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'codebarbarian'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></div></div><div style="padding-bottom: 100px">&nbsp;</div><script type="text/javascript">var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://g0a3nbw0xa.execute-api.us-east-1.amazonaws.com/prod/track', true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onreadystatechange = function() {};
xhr.send(JSON.stringify({
  path: window.location.pathname,
  hostname: window.location.hostname
}));</script><link rel="stylesheet" href="/style/inlinecpc.css"></body></html>