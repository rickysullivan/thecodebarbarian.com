<!DOCTYPE html><html><head><script type="text/javascript">var _sf_startpt=(new Date()).getTime()
</script><title>Keeping a Changelog in Node.js | www.thecodebarbarian.com</title><meta name="viewport" content="width=device-width, initial-scale=1"><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,600,700" rel="stylesheet" type="text/css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"><link href="/style/style.css" rel="stylesheet" type="text/css"><link href="/style/github.css" rel="stylesheet" type="text/css"><script href="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script><script href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script href="/javascript/sidebar.js" type="text/javascript"></script><meta property="og:title" content="Keeping a Changelog in Node.js"><meta property="og:url" content="http://www.thecodebarbarian.com/keeping-a-changelog-in-nodejs"><meta property="og:image" content="https://s3.amazonaws.com/codebarbarian-images/history20180918.jpeg"><meta property="og:site_name" content="The Code Barbarian"><meta property="description" content="[Keeping a changelog](https://keepachangelog.com/en/1.0.0/) is an important practice that many developers don't value enough. Keeping a changelog makes it easy for humans to understand what the important changes in a new release are. Even if you squash commits, there's a key difference between git commit messages and changelogs: commit messages are for developers actively working on the project, changelogs are for consumers of the software. Plus, changelogs are more portable because they are typically written in markdown, so you can search a changelog using a text editor and ctrl+f."><meta name="twitter:image" content="https://s3.amazonaws.com/codebarbarian-images/history20180918.jpeg"></head><body><div class="navbar social-links hidden-sm hidden-xs"><div class="container"><ul class="nav navbar-nav navbar-right"><li><a href="http://www.twitter.com/code_barbarian">twitter</a></li><li><a href="http://www.github.com/vkarpov15">github</a></li><li><a href="http://thecodebarbarian.com/feed.xml">rss</a></li><li><a href="/recommendations">recommendations</a></li></ul></div></div><div class="navbar" id="nav"><div class="container"><div class="navbar-header"><a class="navbar-brand big-brand" href="http://thecodebarbarian.com"><img class="logo" src="/images/Barbarian_Head.png"><span class="site-name">The Code Barbarian</span></a></div><div class="navbar-right collapse navbar-collapse" id="home-nav-mobile"><ul class="nav navbar-nav"><li><a href="/tag/mongodb.html">MongoDB</a></li><li><a href="/tag/nodejs.html">NodeJS</a></li><li><a href="/tag/asyncawait.html">Async/Await</a></li><li><a href="/tag/vue.html">Vue</a></li><li class="hidden-md hidden-lg"><a href="#">@code_barbarian</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Github</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Facebook</a></li></ul></div></div></div><div class="container-fluid"><div class="col-lg-3 col-lg-offset-9 right-bar" id="desktop-right-bar"><div class="right-bar-content-slider pull-right"><div class="row recent-posts right-bar-group"><div class="col-lg-12 articles"><p class="right-bar-label">Most Popular Articles</p><ul class="list-unstyled"><li class="right-bar-li"><a href="/common-async-await-design-patterns-in-node.js.html">Common Async/Await Design Patterns in Node.js</a></li><li class="right-bar-li"><a href="/unhandled-promise-rejections-in-node.js.html">Unhandled Promise Rejections in Node.js</a></li><li class="right-bar-li"><a href="/using-async-await-with-mocha-express-and-mongoose">Using Async/Await with Mocha, Express, and Mongoose</a></li><li class="right-bar-li"><a href="/write-your-own-node-js-promise-library-from-scratch.html">Write Your Own Node.js Promise Library from Scratch</a></li><li class="right-bar-li"><a href="/80-20-guide-to-express-error-handling">The 80/20 Guide to Express Error Handling</a></li></ul></div></div><div class="row recent-posts right-bar-group"><div class="col-lg-12 books"><p class="right-bar-label">Ebooks<div><a href="http://asyncawait.net/?utm_source=thecodebarbarian&amp;utm_campaign=sidebar"><img src="/images/verticalbanner.png"></a></div><div><a href="http://es2015generators.com"><img src="https://i.imgur.com/xvGNKlr.png"><p><i>The 80/20 Guide to ES2015 Generators</i></p></a></div></p></div></div></div></div></div><div class="container-fluid hidden-sm hidden-md hidden-lg" id="mobile-sharing-options"><div class="row"><div class="col-lg-12"><style>#home-nav-mobile {
  float: left !important;
  margin-left: 215px !important;
}
</style><div class="post-sharing-options"><div class="row"><div class="col-xs-3 twitter-share sharing-option"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter"></i></a></div><div class="col-xs-3 facebook-share sharing-option"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook"></i></a></div><div class="col-xs-3 google-share sharing-option"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus"></i></a></div><div class="col-xs-3 comment sharing-option"><a class="social" href="#disqus_thread"><i class="fa fa-comment"></i></a></div></div></div></div></div></div><div class="post-sharing-options hidden-xs pull-left" id="desktop-sharing-options"><ul class="list-unstyled"><li class="twitter-share"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter sharing-option"></i></a></li><li class="facebook-share"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook sharing-option"></i></a></li><li class="google-share"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus sharing-option"></i></a></li></ul></div><div class="container"><div class="col-lg-9 post-text"><div class="row"><div class="title-byline-container"><h1 class="post-title">Keeping a Changelog in Node.js</h1><div class="credits"><span class="byline">by Valeri Karpov</span><span class="byhandle"><a href="http://www.twitter.com/code_barbarian">@code_barbarian</a></span><span class="bydate">September 18, 2018</span></div></div></div><script type="text/javascript" src="/js/native.js"></script><div><script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>

<div class="native-banner"></div>
</div><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CVAIKKQM&placement=carbonadsnet" id="_carbonads_js"></script><div class="post-body-text-container"><p><a href="https://keepachangelog.com/en/1.0.0/">Keeping a changelog</a> is an important practice that many developers don&#39;t value enough. Keeping a changelog makes it easy for humans to understand what the important changes in a new release are. Even if you squash commits, there&#39;s a key difference between git commit messages and changelogs: commit messages are for developers actively working on the project, changelogs are for consumers of the software. Plus, changelogs are more portable because they are typically written in markdown, so you can search a changelog using a text editor and ctrl+f.</p>
<p>For example, if you&#39;re building a REST API, a mobile app developer may be a consumer of your software. The mobile app developer shouldn&#39;t care about minor internal refactors, but they care about whether that one bug was fixed or whether support for a new feature was released. That&#39;s why, at <a href="https://trybooster.com/careers">Booster</a>, we not only keep a changelog for all of our backend services, we have a slack channel that publishes the changelog of new versions as they come in.</p>
<img src="https://i.imgur.com/myaDDCF.png">

<p>Unfortunately, my best (highly unscientific) estimate is that only 5-10% of modules on <a href="https://www.npmjs.com/">npm</a> keep a changelog in their GitHub repo. Here&#39;s a few examples:</p>
<ul>
<li><a href="https://github.com/lodash/lodash/wiki/Changelog">lodash</a></li>
<li><a href="https://github.com/Automattic/mongoose/blob/master/History.md">mongoose</a></li>
<li><a href="https://github.com/jcubic/jquery.terminal/blob/master/CHANGELOG.md">jquery.terminal</a></li>
</ul>
<p>So how do you keep an automated changelog in Node.js? In this article, I&#39;ll describe one basic way that doesn&#39;t involve manually typing out release notes in a markdown file.</p>
<h2 id="angular-style-structured-commits">Angular-Style Structured Commits</h2>
<p>The <a href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-guidelines">Angular team&#39;s commit message convention</a> is one of the more well adopted structured commit conventions.
Below is an example of some commits to the <a href="https://github.com/angular/angular">Angular GitHub repo</a>.</p>
<img src="https://i.imgur.com/Y4SUAxt.png">

<p>According to the <a href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-guidelines">Angular commit message convention</a>, every commit message must start with a &#39;type&#39; that describes the nature of the change at a high level. The &#39;type&#39; lets you easily understand the intent of a commit: whether it fixes a bug, adds a new feature, changes the build system, etc. Below is a list of all currently supported types:</p>
<ul>
<li>build: Changes that affect the build system or external dependencies</li>
<li>ci: Changes to our CI configuration files and scripts</li>
<li>docs: Documentation only changes</li>
<li>feat: A new feature</li>
<li>fix: A bug fix</li>
<li>perf: A code change that improves performance</li>
<li>refactor: A code change that neither fixes a bug nor adds a feature</li>
<li>style: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)</li>
<li>test: Adding missing tests or correcting existing tests</li>
</ul>
<p>I&#39;ve been using this commit message format for years across all my projects because it provides an easy way to separate changes that are consumer-facing versus internal. Generally, any commit that starts with <code>fix</code> or <code>feat</code> belongs in the changelog because consumers should be informed of bug fixes and features. Commits that start with <code>ci</code>, <code>chore</code>, <code>style</code>, or <code>build</code> do not belong in the changelog. Commits that start with <code>perf</code> or <code>docs</code> may belong in the changelog depending on your project.</p>
<h2 id="generating-a-changelog-from-angular-structured-commits">Generating a Changelog from Angular Structured Commits</h2>
<p>The source code for this example is available in the <a href="https://github.com/vkarpov15/changelog-example"><code>vkarpov15/changelog-example</code> GitHub repo</a>. The npm module I usually use for generating a changelog from Angular-style commit messages is called <a href="https://www.npmjs.com/package/standard-changelog">standard-changelog</a>. Standard-changelog is a command-line executable that processes every git commit between the previous tag and the current tag, and appends any <code>feat</code>, <code>fix</code>, or <code>perf</code> commits to the <code>CHANGELOG.md</code> file. For example, there are 4 commit messages in the <a href="https://github.com/vkarpov15/changelog-example/commits/master">changelog-example repo</a>:</p>
<ul>
<li>chore: release 0.2.0</li>
<li>fix(index): remove unnecessary exclamation</li>
<li>chore: use double quote instead of single for release script</li>
<li>Initial commit</li>
</ul>
<p>Standard-changelog ignores any commit whose message starts with <code>chore</code>. It also
ignores any commit message that doesn&#39;t have a type, so it ignores the commit with
the &#39;Initial commit&#39; message. So when you run <code>./node_modules/.bin/standard-changelog</code>, you get the <a href="https://github.com/vkarpov15/changelog-example/commit/cf39305263610727f70f6c46f77bfa3d0b67d612">below changelog</a>:</p>
<pre><code>&lt;a name=&quot;0.2.0&quot;&gt;&lt;/a&gt;
# 0.2.0 (2018-09-18)


### Bug Fixes

* **index:** remove unnecessary exclamation ([d148e12](https://github.com/vkarpov15/changelog-example/commit/d148e12))</code></pre><p>Generally, you should run <code>standard-changelog</code> from a release script in your <code>package.json</code>. This release script should encapsulate everything you need to do to create a new release for your project:</p>
<ul>
<li>Create a <code>chore: release X.Y.Z</code> commit</li>
<li>Create a git tag for the release</li>
<li>Append to <code>CHANGELOG.md</code></li>
<li>Push to <code>master</code></li>
<li><code>npm publish</code> if necessary</li>
</ul>
<p>For the changelog-example project, I added a <code>release</code> script that does all these tasks from the command line:</p>
<pre><code>{
  &quot;name&quot;: &quot;changelog-example&quot;,
  &quot;version&quot;: &quot;0.2.0&quot;,
  &quot;devDependencies&quot;: {
    &quot;print-pkg-version&quot;: &quot;0.2.1&quot;,
    &quot;standard-changelog&quot;: &quot;2.0.1&quot;
  },
  &quot;scripts&quot;: {
    &quot;release&quot;: &quot;standard-changelog &amp;&amp; git commit -a -m \&quot;chore: release `./node_modules/.bin/print-pkg-version`\&quot; &amp;&amp; git tag `./node_modules/.bin/print-pkg-version` &amp;&amp; git push origin master --tags&quot;
  }
}</code></pre><p>With this release script, you still need to bump the <code>package.json</code> version manually.</p>
<h2 id="moving-on">Moving On</h2>
<p>Changelogs are how you tell your users what changes they need to be aware of. Commit logs are usually not enough, because they can include internal changes that are irrelevant to consumers and because they aren&#39;t sufficiently portable. So whether you&#39;re an npm module author, building an internal RESTful API, or building a mobile app, make sure you <a href="https://keepachangelog.com/en/1.0.0/">keep a changelog</a> so your users know exactly what changes they should be aware of.</p>
<p><em>Worried about what&#39;s going on in your <code>./node_modules</code>? Still having left_pad nightmares? <a href="https://tidelift.com/subscription/pkg/npm-mongoose?utm_source=npm-mongoose&amp;utm_medium=website">Tidelift</a> is working to help maintainers communicate important changes to developers using their npm modules, like license changes and security fixes. If you like the idea of a centralized channel for npm module related information that&#39;s separate from GitHub, check out <a href="https://tidelift.com/subscription/pkg/npm-mongoose?utm_source=npm-mongoose&amp;utm_medium=website">Tidelift</a>.</em></p>
</div><div style="color: #666666; border-top: 1px dashed #666666; margin: 25px; text-align: center; padding-top: 10px"><em>Found a typo or error? Open up a pull request! This post is
available as markdown on&nbsp;<a href="https://github.com/vkarpov15/thecodebarbarian.com/blob/master/lib/posts/#{post.src.substr('./lib/posts/'.length)}">Github</a></em></div><div id="disqus_thread"></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'codebarbarian'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></div></div><div style="padding-bottom: 100px">&nbsp;</div><script type="text/javascript">var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://g0a3nbw0xa.execute-api.us-east-1.amazonaws.com/prod/track', true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onreadystatechange = function() {};
xhr.send(JSON.stringify({
  path: window.location.pathname,
  hostname: window.location.hostname
}));</script><link rel="stylesheet" href="/style/inlinecpc.css"></body></html>