<!DOCTYPE html><html><head><script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TE4SWRGR9E"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-TE4SWRGR9E');
</script><title>Building a Form with Preact | www.thecodebarbarian.com</title><meta name="viewport" content="width=device-width, initial-scale=1"><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,600,700" rel="stylesheet" type="text/css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"><link href="/style/style.css" rel="stylesheet" type="text/css"><link href="/style/github.css" rel="stylesheet" type="text/css"><script href="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script><script href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script href="/javascript/sidebar.js" type="text/javascript"></script><meta property="og:title" content="Building a Form with Preact"><meta property="og:url" content="http://www.thecodebarbarian.com/building-a-form-with-preact"><meta property="og:image" content="https://s3.amazonaws.com/codebarbarian-images/20181102_checkbox.jpeg"><meta property="og:site_name" content="The Code Barbarian"><meta property="description" content="[Preact](https://www.npmjs.com/package/preact) is a simplified alternative to React that focuses on bundle size. A minified bundle with Preact and a minimal [Webpack](https://webpack.js.org/) config ends up being around 10KB. A minimal unbundled React bundle ends up being around 100KB because of [react-dom](https://www.npmjs.com/package/react-dom). Because Preact bundles are comparatively tiny, Preact is a great choice for making sure your app feels snappy."><meta name="twitter:image" content="https://s3.amazonaws.com/codebarbarian-images/20181102_checkbox.jpeg"></head><body><div class="navbar social-links hidden-sm hidden-xs"><div class="container"><ul class="nav navbar-nav navbar-right"><li><a href="http://www.twitter.com/code_barbarian">twitter</a></li><li><a href="http://www.github.com/vkarpov15">github</a></li><li><a href="http://thecodebarbarian.com/feed.xml">rss</a></li><li><a href="/recommendations">recommendations</a></li></ul></div></div><div class="navbar" id="nav"><div class="container"><div class="navbar-header"><a class="navbar-brand big-brand" href="http://thecodebarbarian.com"><img class="logo" src="/images/Barbarian_Head.png"><span class="site-name">The Code Barbarian</span></a></div><div class="navbar-right collapse navbar-collapse" id="home-nav-mobile"><ul class="nav navbar-nav"><li><a href="/tag/mongodb.html">MongoDB</a></li><li><a href="/tag/nodejs.html">NodeJS</a></li><li><a href="/tag/asyncawait.html">Async/Await</a></li><li><a href="/tag/vue.html">Vue</a></li><li class="hidden-md hidden-lg"><a href="#">@code_barbarian</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Github</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Facebook</a></li></ul></div></div></div><div class="container-fluid"><div class="col-lg-3 col-lg-offset-9 right-bar" id="desktop-right-bar"><div class="right-bar-content-slider pull-right"><div class="row recent-posts right-bar-group"><div class="col-lg-12 articles"><p class="right-bar-label">Most Popular Articles</p><ul class="list-unstyled"><li class="right-bar-li"><a href="/common-async-await-design-patterns-in-node.js.html">Common Async/Await Design Patterns in Node.js</a></li><li class="right-bar-li"><a href="/unhandled-promise-rejections-in-node.js.html">Unhandled Promise Rejections in Node.js</a></li><li class="right-bar-li"><a href="/using-async-await-with-mocha-express-and-mongoose">Using Async/Await with Mocha, Express, and Mongoose</a></li><li class="right-bar-li"><a href="/write-your-own-node-js-promise-library-from-scratch.html">Write Your Own Node.js Promise Library from Scratch</a></li><li class="right-bar-li"><a href="/80-20-guide-to-express-error-handling">The 80/20 Guide to Express Error Handling</a></li></ul></div></div><div class="row recent-posts right-bar-group"><div class="col-lg-12 books"><p class="right-bar-label">Ebooks<div><a href="http://asyncawait.net/?utm_source=thecodebarbarian&amp;utm_campaign=sidebar"><img src="/images/verticalbanner.png"></a></div><div><a href="http://es2015generators.com"><img src="https://i.imgur.com/xvGNKlr.png"><p><i>The 80/20 Guide to ES2015 Generators</i></p></a></div></p></div></div></div></div></div><div class="container-fluid hidden-sm hidden-md hidden-lg" id="mobile-sharing-options"><div class="row"><div class="col-lg-12"><style>#home-nav-mobile {
  float: left !important;
  margin-left: 215px !important;
}
</style><div class="post-sharing-options"><div class="row"><div class="col-xs-3 twitter-share sharing-option"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter"></i></a></div><div class="col-xs-3 facebook-share sharing-option"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook"></i></a></div><div class="col-xs-3 google-share sharing-option"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus"></i></a></div><div class="col-xs-3 comment sharing-option"><a class="social" href="#disqus_thread"><i class="fa fa-comment"></i></a></div></div></div></div></div></div><div class="post-sharing-options hidden-xs pull-left" id="desktop-sharing-options"><ul class="list-unstyled"><li class="twitter-share"><a class="social" href="https://twitter.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}&amp;via=code_barbarian"><i class="fa fa-twitter sharing-option"></i></a></li><li class="facebook-share"><a class="social" href="https://www.facebook.com/sharer/sharer.php?u=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-facebook sharing-option"></i></a></li><li class="google-share"><a class="social" href="https://plus.google.com/share?url=#{encodeURIComponent('http://www.thecodebarbarian.com/' + post.dest.directory.substr('./bin'.length) + '/' + post.dest.name)}"><i class="fa fa-google-plus sharing-option"></i></a></li></ul></div><div class="container"><div class="col-lg-9 post-text"><div class="row"><div class="title-byline-container"><h1 class="post-title">Building a Form with Preact</h1><div class="credits"><span class="byline">by Valeri Karpov</span><span class="byhandle"><a href="http://www.twitter.com/code_barbarian">@code_barbarian</a></span><span class="bydate">November 02, 2018</span></div></div></div><script type="text/javascript" src="/js/native.js"></script><div><script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>

<div class="native-banner"></div>
</div><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYI5K3Y&placement=thecodebarbariancom" id="_carbonads_js"></script><div class="post-body-text-container"><p><a href="https://www.npmjs.com/package/preact">Preact</a> is a simplified alternative to React that focuses on bundle size. A minified bundle with Preact and a minimal <a href="https://webpack.js.org/">Webpack</a> config ends up being around 10KB. A minimal unbundled React bundle ends up being around 100KB because of <a href="https://www.npmjs.com/package/react-dom">react-dom</a>. Because Preact bundles are comparatively tiny, Preact is a great choice for making sure your app feels snappy.</p>
<pre><code>$ ./node_modules/.bin/webpack
Hash: a1fc672a4a8c9742be78
Version: webpack 4.23.1
Time: 1769ms
Built at: 2018-11-01 13:00:14
    Asset      Size  Chunks             Chunk Names
preact.js  9.64 KiB       0  [emitted]  preact
 react.js   109 KiB       1  [emitted]  react
Entrypoint preact = preact.js
Entrypoint react = react.js
[2] ./preact.js 33 bytes {0} [built]
[4] ./react.js 71 bytes {1} [built]
    + 8 hidden modules</code></pre><p>I used the below Webpack config to get the above result.</p>
<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = {
  entry: {
    preact: <span class="hljs-string">'./preact.js'</span>,
    react: <span class="hljs-string">'./react.js'</span>
  },
  target: <span class="hljs-string">'web'</span>,
  output: {
    path: <span class="hljs-string">`<span class="hljs-subst">${process.cwd()}</span>/bin`</span>,
    filename: <span class="hljs-string">'[name].js'</span>
  }
};</code></pre>
<p>Vanilla JS has gotten very good these days and you often don&#39;t need any framework, but
once you need to manage state and user input, a framework makes
things much easier. Preact is great because it doesn&#39;t add too much bloat to your
app bundle and gives you just enough of React to save you from having to manually
register event listeners on DOM events. In this article, I&#39;ll walk through
building a basic form using Preact.</p>
<h2 id="setting-up-preact">Setting Up Preact</h2>
<p>Like React, Preact is much easier with JSX, so you&#39;ll need to install Webpack, <a href="https://www.npmjs.com/package/@babel/core">Babel</a>, and a <a href="https://www.npmjs.com/package/@babel/plugin-transform-react-jsx">Babel transform for JSX</a>. You should
also install a static HTTP server like <a href="https://www.npmjs.com/package/serve">serve</a>.</p>
<pre><code>npm install preact babel-loader@8.x @babel/core@7.x @babel/plugin-transform-react-jsx@7.x webpack@4.x webpack-cli@3.x serve@10.x</code></pre><p>This may seem like a lot to install for a simple app, but Babel and Webpack don&#39;t
end up in the end bundle, so your app size will still be small.</p>
<p>First, let&#39;s set up a basic <code>index.html</code> file that will serve as the entry point for the
app.</p>
<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Preact Test&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;div id=&quot;content&quot;&gt;&lt;/div&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;bin/index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre><p>Next, let&#39;s create an <code>index.js</code> file that will render some basic JSX:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">'preact'</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>;</span>
  }
}

React.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">App</span>&gt;</span>, document.querySelector('#content'));</span></code></pre>
<p>To create the <code>bin/index.js</code> bundle that <code>index.html</code> will use, we&#39;ll need Webpack:</p>
<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = {
  entry: {
    index: <span class="hljs-string">'./index.js'</span>
  },
  target: <span class="hljs-string">'web'</span>,
  output: {
    path: <span class="hljs-string">`<span class="hljs-subst">${process.cwd()}</span>/bin`</span>,
    filename: <span class="hljs-string">'[name].js'</span>
  },
  <span class="hljs-built_in">module</span>: {
    rules: [{
      test: <span class="hljs-regexp">/\.js$/</span>,
      use: {
        loader: <span class="hljs-string">'babel-loader'</span>
      }
    }]
  }
};</code></pre>
<p>And to configure Babel, we&#39;ll need a <code>.babelrc</code> file as well:</p>
<pre><code>{
  &quot;plugins&quot;: [&quot;@babel/plugin-transform-react-jsx&quot;]
}</code></pre><p>To compile, run <code>./node_modules/.bin/webpack</code></p>
<pre><code>$ ./node_modules/.bin/webpack
Hash: a4ff19ba7c622174cb97
Version: webpack 4.23.1
Time: 578ms
Built at: 2018-11-01 13:20:32
   Asset      Size  Chunks             Chunk Names
index.js  9.85 KiB       0  [emitted]  index
Entrypoint index = index.js
[0] ./index.js 288 bytes {0} [built]
    + 1 hidden module</code></pre><p>Finally, run <code>serve</code> using <code>./node_modules/.bin/serve</code> and visit <code>http://localhost:5000</code>. You should see &quot;Hello, World&quot; show up.</p>
<h2 id="a-basic-form">A Basic Form</h2>
<p>Forms in Preact are much easier with the <a href="https://www.npmjs.com/package/linkstate">linkstate</a>
module, which was split off from core Preact. The linkstate module is tiny relative to Preact
itself, so don&#39;t worry about it adding bloat.</p>
<pre><code>npm install linkstate@1.x</code></pre><p>Like <a href="https://stackoverflow.com/questions/52531081/how-to-use-componentdidmount-to-render-values-to-form-in-react">in React</a>, the standard pattern for a form with <a href="https://reactjs.org/docs/forms.html">controlled inputs</a> in Preact is:</p>
<p>1) Load form data in <code>componentDidMount()</code>
2) Display the inputs with the input value bound to <code>state</code> and update <code>state</code> when the user modifies the form
3) Call a <code>save()</code> function when the user submits the form</p>
<p>In the interest of making this form a bit more realistic, I&#39;ll put the form behind a <code>setTimeout()</code>. When you&#39;re building an actual app, you will likely be loading this data via an HTTP request in <code>componentDidMount()</code>. To avoid having to set up an actual HTTP server, this example will use <code>setTimeout()</code> instead.</p>
<pre><code class="language-javascript">componentDidMount() {
  <span class="hljs-keyword">this</span>.setState({ loading: <span class="hljs-literal">true</span> });

  setTimeout(() =&gt; {
    <span class="hljs-keyword">this</span>.setState({ loading: <span class="hljs-literal">false</span>, firstName: <span class="hljs-string">'Foo'</span>, lastName: <span class="hljs-string">'Bar'</span> });
  }, <span class="hljs-number">100</span>);
}</code></pre>
<p>Next, let&#39;s take a look at the <code>render()</code> function. Preact <code>render()</code> functions
are slightly different than React&#39;s in that they take 2 params: <code>props</code> and <code>state</code>.
For this example, <code>props</code> doesn&#39;t matter, but <code>state</code> contains the component state.</p>
<pre><code class="language-javascript">render(props, state) {
  <span class="hljs-keyword">if</span> (state.loading) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>;</span>
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>First Name<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        // linkstate updates `state.firstName` every time the user types in
        // this input
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{state.firstName}</span> <span class="hljs-attr">onInput</span>=<span class="hljs-string">{linkstate(this,</span> '<span class="hljs-attr">firstName</span>')} /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Last Name<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{state.lastName}</span> <span class="hljs-attr">onInput</span>=<span class="hljs-string">{linkstate(this,</span> '<span class="hljs-attr">lastName</span>')} /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Submit"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.save()}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  )</span>;
}</code></pre>
<p>Why is <code>linkstate</code> useful? Take a look at the <code>save()</code> function below. This is
because JavaScript functions lose context when they&#39;re assigned to a value. If
<code>save()</code> didn&#39;t return a function and you just used <code>onClick={this.save}</code>, <code>this</code>
would be undefined in the <code>save()</code> function. You would instead need to do <code>this.save.bind(this)</code>, but <a href="https://stackoverflow.com/questions/18895305/will-function-prototype-bind-always-be-slow"><code>bind()</code> is slow</a>.</p>
<pre><code class="language-javascript">save() {
  <span class="hljs-keyword">return</span> () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.state.firstName, <span class="hljs-keyword">this</span>.state.lastName);
}</code></pre>
<h2 id="a-form-component">A Form Component</h2>
<p>In practice, your form will usually not be responsible for loading its own data.
You&#39;ll likely have a top-level component that loads the data, and then several
different components underneath that allow the user to modify different parts of
the data.</p>
<p>Having a separate form component is tricky because the top-level component will
pass in the initial state of the data as <code>props</code>. The form component will then
store any modifications as <code>state</code> internally.</p>
<p>But, when the user submits the form, you&#39;ll send an HTTP request to the server
and then the top-level component will get back new data from the server. The
form component then needs to be able to react to the new <code>props</code>. The way to
handle this in Preact is the <a href="https://preactjs.com/guide/api-reference"><code>componentWillReceiveProps()</code> hook</a>.</p>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  componentDidMount() {
    <span class="hljs-keyword">this</span>.setState(<span class="hljs-built_in">Object</span>.assign({}, <span class="hljs-keyword">this</span>.state, <span class="hljs-keyword">this</span>.props));
  }

  componentWillReceiveProps(nextProps) {
    <span class="hljs-comment">// Will get called when the component is already mounted, but `props`</span>
    <span class="hljs-comment">// changed.</span>
    <span class="hljs-keyword">this</span>.setState(<span class="hljs-built_in">Object</span>.assign({}, <span class="hljs-keyword">this</span>.state, nextProps));
  }

  render(props, state) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>First Name<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{state.firstName}</span> <span class="hljs-attr">onInput</span>=<span class="hljs-string">{linkstate(this,</span> '<span class="hljs-attr">firstName</span>')} /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Last Name<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{state.lastName}</span> <span class="hljs-attr">onInput</span>=<span class="hljs-string">{linkstate(this,</span> '<span class="hljs-attr">lastName</span>')} /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
          // Assume `props` contains a `save()` function in the interest of
          // not adding something like Redux to this relatively simple example.
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Submit"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> props.save(state)} /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    )</span>;
  }
}</code></pre>
<p>Below is the updated <code>save()</code> and <code>render()</code> for the top-level <code>App</code> component.
The big change here is that the <code>App</code> component passes the <code>save()</code> function
to the <code>Form</code> component as a prop. This is to avoid having to add
<a href="http://npmjs.com/package/redux">Redux</a> or something similar to this simple example.
In practice you probably should just use a Redux store.</p>
<pre><code class="language-javascript">save(data) {
  <span class="hljs-built_in">console</span>.log(data.firstName, data.lastName);
  setTimeout(() =&gt; {
    <span class="hljs-keyword">this</span>.setState(<span class="hljs-built_in">Object</span>.assign({}, data));
  }, <span class="hljs-number">100</span>);
}

render(props, state) {
  <span class="hljs-keyword">if</span> (state.loading) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>;</span>
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">Form</span>
        <span class="hljs-attr">firstName</span>=<span class="hljs-string">{this.state.firstName}</span>
        <span class="hljs-attr">lastName</span>=<span class="hljs-string">{this.state.lastName}</span>
        <span class="hljs-attr">save</span>=<span class="hljs-string">{data</span> =&gt;</span> this.save(data)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  )</span>;
}</code></pre>
<p>All in all, the total page weight is 12KB without any gzipping. Not bad!</p>
<img class="inline-image" src="https://i.imgur.com/lifNj6B.png">

<h2 id="moving-on">Moving On</h2>
<p>Preact is a great library for when you want to build a simple form without adding 100KB+ to your total <a href="https://deviceatlas.com/blog/understanding-web-page-weight">page weight</a>. Vanilla JS is great for display-only pages, but starts getting cumbersome once you need to handle some non-trivial user input. Next time you want to use React but feel like it is too heavy, give Preact a shot.</p>
</div><div style="color: #666666; border-top: 1px dashed #666666; margin: 25px; text-align: center; padding-top: 10px"><em>Found a typo or error? Open up a pull request! This post is
available as markdown on&nbsp;<a href="https://github.com/vkarpov15/thecodebarbarian.com/blob/master/lib/posts/#{post.src.substr('./lib/posts/'.length)}">Github</a></em></div><div id="disqus_thread"></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'codebarbarian'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></div></div><div style="padding-bottom: 100px">&nbsp;</div><script type="text/javascript">var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://g0a3nbw0xa.execute-api.us-east-1.amazonaws.com/prod/track', true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onreadystatechange = function() {};
xhr.send(JSON.stringify({
  path: window.location.pathname,
  hostname: window.location.hostname
}));</script><link rel="stylesheet" href="/style/inlinecpc.css"></body></html>